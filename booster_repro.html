<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Booster Chat Repro</title>
</head>

<body>
    <h1>Booster Chat Test</h1>
    <button onclick="openBoosterChat(123)">Open Chat</button>

    <div id="modal-chat" style="display:none; border: 1px solid black; padding: 20px;">
        <h2>Chat Window</h2>
        <div id="booster-chat-messages"></div>
        <input type="text" id="booster-chat-input">
        <button id="booster-chat-send">Send</button>
        <button onclick="closeBoosterChat()">Close</button>
    </div>

    <script>
        // Mock API
        async function apiFetch(endpoint) {
            console.log('API Call:', endpoint);
            return { messages: [{ content: 'Hello', user_id: 1, sender_name: 'Client', created_at: new Date().toISOString() }] };
        }

        window.currentUserId = 1;

        // Logic from booster.html
        window.openBoosterChat = function (orderId) {
            console.log('Opening chat for order:', orderId);
            currentChatOrderId = orderId;
            const modal = document.getElementById('modal-chat');
            if (modal) {
                modal.style.display = 'block'; // using block for test
                loadBoosterMessages();
            } else {
                console.error('Modal not found');
            }
        }

        window.closeBoosterChat = function () {
            document.getElementById('modal-chat').style.display = 'none';
        }

        async function loadBoosterMessages() {
            console.log('Loading messages...');
            const container = document.getElementById('booster-chat-messages');
            if (!container) { console.error('Container not found'); return; }

            const data = await apiFetch('/chat/123');
            container.innerHTML = data.messages.map(m => `<div>${m.content}</div>`).join('');
        }

        let currentChatOrderId = null;
    </script>
</body>

</html>